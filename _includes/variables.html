{%- if page.title -%}
  {%- assign page_title = page.title | append: " | " | append: site.title -%}
{%- else -%}
  {%- assign page_title = site.title -%}
{%- endif -%}

{%- if page.page_excerpt_overload -%}
  {%- assign page_excerpt = page.page_excerpt_overload -%}
{%- elsif page.url != '/' and page.content -%}
  {%- assign page_excerpt = page.content | markdownify | strip_html | strip_newlines | truncatewords: 20 -%}
{%- else -%}
  {%- assign page_excerpt = site.description -%}
{%- endif -%}